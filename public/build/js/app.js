const body=document.querySelector("body");function iniciarApp(){darkMode(),tabs(),goBack(),consultarAPI()}function darkMode(){const t=window.matchMedia("(prefers-color-scheme: dark)"),o=document.querySelector(".app"),e=document.querySelectorAll(".boton");t.matches?(body.classList.add("dark-mode"),o.classList.add("dark-mode"),e.forEach(t=>{t.classList.add("dark-mode")})):(body.classList.remove("dark-mode"),o.classList.remove("dark-mode"),butons.forEach(t=>{t.classList.remove("dark-mode")}))}function tabs(){const t=body.querySelectorAll(".menu_item"),o=window.location.pathname;t.forEach(t=>{const e=t.children[0],a=new URL(e.href).pathname;(o===a||"/index.php"===o&&"/"===a)&&t.classList.add("active")})}function goBack(){const t=body.querySelector(".boton_back");t&&t.addEventListener("click",t=>{window.history.back()})}function editarProducto(t){console.log(t)}function eliminarProducto(t){console.log(t)}async function consultarAPI(){mostrarUsuarios(),mostrarProductos()}async function mostrarUsuarios(){try{let t=await consultarUsuarios(),o=await consultarRoles();t.forEach(t=>{let e="";const{user_id:a,user_nombre:c,user_rol:s,user_correo:n}=t;o.forEach(t=>{t.rol_id===s&&(e=t.rol_nombre)});const r=document.createElement("TR");r.classList.add("table_row");const d=document.createElement("TD");d.textContent=c;const l=document.createElement("TD");l.textContent=e;const i=document.createElement("TD");i.textContent=n;const u=document.createElement("TD"),m=document.createElement("button");m.classList.add("table_actions"),m.classList.add("edit");const h=document.createElement("I");h.classList.add("fa-solid"),h.classList.add("fa-pen-to-square"),m.appendChild(h);const p=document.createElement("button");p.classList.add("table_actions"),p.classList.add("delete");const f=document.createElement("I");f.classList.add("fa-solid"),f.classList.add("fa-trash"),p.appendChild(f),u.appendChild(m),u.appendChild(p);[d,l,i,u].forEach(t=>{r.appendChild(t)}),body.querySelector("#usuarios").appendChild(r)})}catch(t){console.log(t+" Error")}}async function mostrarProductos(){try{let t="http://localhost:3000/api/productos",o=await fetch(t);await o.json();t="http://localhost:3000/api/categorias",o=await fetch(t);await o.json()}catch(t){console.log(t)}}async function consultarUsuarios(){try{let t="http://localhost:3000/api/usuarios",o=await fetch(t);return await o.json()}catch(t){console.log(t)}}async function consultarRoles(){try{let t="http://localhost:3000/api/roles",o=await fetch(t);return await o.json()}catch(t){console.log(t)}}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));